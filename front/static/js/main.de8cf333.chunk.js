(this.webpackJsonpIonicShopList=this.webpackJsonpIonicShopList||[]).push([[1],{111:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),o=t(36),s=t.n(o),a=t(7),i=t(15),u=t(3),j=t(62),l=(t(82),t(83),t(84),t(85),t(86),t(87),t(88),t(89),t(90),t(91),t(92),t(4)),b=t.n(l),h=t(8),f=t(13),p=t(40),d=t.n(p),O=d.a.create({baseURL:"http://localhost:3000/"}),x=t(2);var v=function(e){var n=Object(r.useState)(e.product),t=Object(a.a)(n,2),c=t[0],o=t[1];return Object(x.jsxs)(u.q,{children:[Object(x.jsxs)(u.n,{children:[Object(x.jsx)(u.m,{value:c.productName,placeholder:"Produkt",onIonChange:function(n){var t;t=n.detail.value,c.productName=t,o(c),e.onChange(c)},type:"text"}),Object(x.jsx)(u.r,{children:"Ilo\u015b\u0107:"}),Object(x.jsx)(u.m,{size:3,value:c.count,onIonChange:function(n){var t;t=parseInt(n.detail.value),c.count=t,o(c),e.onChange(c)},type:"number"}),Object(x.jsx)(u.g,{onIonChange:function(n){var t;t=n.detail.checked,c.isChecked=t,o(c),e.onChange(c)},checked:c.isChecked})]}),Object(x.jsx)(u.p,{side:"end",children:Object(x.jsx)(u.o,{onClick:function(){e.onDelete(c.itemID)},color:"danger",expandable:!0,children:Object(x.jsx)(u.l,{icon:f.t,size:"large"})})})]})},m=t(27),y=function(){var e=Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),n=d.a.create({baseURL:"http://localhost:3000/"});return{post:e,api:n}},g=function(){var e=Object(m.a)("access_token"),n=Object(a.a)(e,2),t=n[0],c=(n[1],y().api),o=Object(r.useState)({headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyTmFtZSI6Imtsb25layIsInVzZXJJRCI6MiwiaWF0IjoxNzIzNjU2NTY5LCJleHAiOjE3MzIyOTY1Njl9.oqpiipDBLv6kqQaU3yWltxLDrPRLprTvxBM1No-7r_U"}}),s=Object(a.a)(o,2),i=s[0],u=s[1];Object(r.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("effect token",t),e.next=3,j();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var j=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u({headers:{Authorization:"Bearer ".concat(t)}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{post:Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(i.headers),console.log("post token",t),e.next=4,c.post(n,r,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),get:Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(i),e.next=3,c.get(n,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),update:Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n,t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.put(n,t,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),remove:Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.delete(n,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[])}},k=function(e){var n=Object(r.useState)([]),t=Object(a.a)(n,2),c=t[0],o=t[1],s=Object(r.useState)(e.isActive),i=Object(a.a)(s,2),j=i[0],l=i[1],b=g(),h=b.get,p=b.post,d=b.update,O=b.remove;Object(r.useEffect)((function(){m()}),[j]);var m=function(){h("items/findByShopID/?id="+e.shopListID).then((function(e){console.log("getProductSuccess",e.data),o(e.data)})).catch((function(e){}))},y=function(){console.log("shopListID",e),p("items/",{shopListID:e.shopListID}).then((function(e){m()})).catch((function(e){console.log(e)}))},k=function(e){!function(e){d("items/"+e.itemID,e).then((function(e){console.log(e.data),m()})).catch((function(e){console.log(e)}))}(e)},w=function(e){!function(e){O("items/"+e).then((function(e){console.log("delete response:",e.data),o([]),m()})).catch((function(e){console.log(e)}))}(e)};return Object(x.jsxs)(u.d,{children:[j?Object(x.jsx)(u.s,{children:c.map((function(e){return Object(x.jsx)(v,{product:e,onChange:function(e){k(e)},onDelete:function(e){w(e)}})}))}):null,Object(x.jsxs)(u.C,{children:[Object(x.jsx)(u.b,{onClick:function(){return l(!j)},fill:"clear",expand:"full",size:"small",color:"medium",children:j?Object(x.jsx)(u.l,{icon:f.e}):Object(x.jsx)(u.l,{icon:f.d})}),j?Object(x.jsx)(u.b,{onClick:function(){y()},fill:"clear",slot:"end",size:"large",children:Object(x.jsx)(u.l,{icon:f.b})}):null]})]})};var w=function(e){var n=Object(r.useState)(e.shopList),t=Object(a.a)(n,2),c=t[0],o=(t[1],Object(r.useState)(!0)),s=Object(a.a)(o,2),i=s[0],j=(s[1],Object(r.useState)({showPopover:!1,event:void 0})),l=Object(a.a)(j,2),b=l[0],h=l[1];return Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.e,{color:"secondary",children:Object(x.jsxs)(u.C,{color:"secondary",children:[Object(x.jsx)(u.f,{children:c.name}),Object(x.jsx)(u.b,{slot:"end",fill:"clear",onClick:function(e){e.persist(),h({showPopover:!0,event:e})},children:Object(x.jsx)(u.l,{icon:f.m})})]})}),Object(x.jsx)(k,{isActive:i,shopListID:c.shopListID}),Object(x.jsx)(u.v,{isOpen:b.showPopover,event:b.event,onDidDismiss:function(){return h({showPopover:!1,event:void 0})},children:Object(x.jsx)(u.b,{fill:"clear",expand:"full",color:"danger",onClick:function(){O.delete("shop-lists/"+c.shopListID).then((function(n){console.log(n.data),e.onDelete()})).catch((function(e){console.log(e)})),h({showPopover:!1,event:void 0})},children:"Usu\u0144"})})]})},I=function(e){var n=Object(r.useState)(!1),t=Object(a.a)(n,2),c=(t[0],t[1]),o=Object(r.useState)(!1),s=Object(a.a)(o,2),i=s[0],j=s[1],l=Object(r.useState)(""),b=Object(a.a)(l,2),h=b[0],p=b[1];Object(r.useEffect)((function(){c(!1)}));return Object(x.jsx)("div",{children:Object(x.jsxs)(u.i,{vertical:"bottom",horizontal:"end",children:[Object(x.jsx)(u.j,{onClick:function(){j(!0)},children:Object(x.jsx)(u.l,{icon:f.a})}),Object(x.jsx)(u.t,{isOpen:i,cssClass:"my-custom-class",children:Object(x.jsxs)(u.u,{children:[Object(x.jsxs)(u.n,{children:[Object(x.jsx)(u.r,{children:"Nazwa nowej listy: "}),Object(x.jsx)(u.m,{value:h,placeholder:"Nazwa nowej listy",onIonChange:function(e){p(e.detail.value)}})]}),Object(x.jsx)(u.b,{onClick:function(){return e.onAddListClick(h),j(!1),void p("")},children:"Dodaj liste"})]})})]})})};var C=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),s=Object(a.a)(o,2),i=(s[0],s[1],Object(m.a)("access_token")),j=Object(a.a)(i,2),l=j[0],f=(j[1],g().get);Object(r.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d().then((function(e){console.log(e),c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var p={headers:{Authorization:"Bearer ".concat(l)}},d=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("token from container",l),e.next=3,f("shop-lists/").then((function(e){return e.data})).catch((function(e){console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(u.u,{children:[Object(x.jsx)(u.h,{children:Object(x.jsx)(u.s,{children:t.map((function(e){return Object(x.jsx)(w,{shopList:e,onDelete:function(){c([]),d()}})}))})}),Object(x.jsx)(I,{onAddListClick:function(e){var n;n=e,O.post("shop-lists/",{name:n},p).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),console.log(e)}})]})},D=function(){var e=Object(m.a)("access_token"),n=Object(a.a)(e,2),t=n[0],c=n[1],o=y().post,s=Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.t0=e.sent,e.abrupt("return",null!==e.t0);case 4:case"end":return e.stop()}}),e)}))),[]),i=Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n,t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("users/login/",{userName:n,password:t});case 2:return r=e.sent,e.next=5,c(r.data.access_token);case 5:return e.abrupt("return",r.data.access_token);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),u=Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(null);case 2:return e.abrupt("return","success");case 3:case"end":return e.stop()}}),e)}))),[]),j=Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[]),l=Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(n,t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("user/register",{userName:n,password:t});case 2:return r=e.sent,e.next=5,i(r.name,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]);return{isLogged:s,login:i,logout:u,token:j,register:l}},_=function(){var e=Object(r.useState)({name:null,userID:null,token:null}),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(i.e)(),s=D().login;return Object(x.jsxs)(u.h,{children:[Object(x.jsxs)(u.n,{children:[Object(x.jsx)(u.r,{children:"Nazwa u\u017cytkownika"}),Object(x.jsx)(u.m,{type:"text",onIonChange:function(e){c({name:e.detail.value,token:t.token,userID:t.userID})}})]}),Object(x.jsxs)(u.n,{children:[Object(x.jsx)(u.r,{children:"Has\u0142o"}),Object(x.jsx)(u.m,{type:"password",onIonChange:function(e){c({name:t.name,token:e.detail.value,userID:t.userID})}})]}),Object(x.jsx)(u.n,{children:Object(x.jsx)(u.b,{onClick:function(){s(t.name||"",t.token||"").then((function(e){c({name:t.name,userID:t.userID,token:e}),o.push("/dashboard")}))},children:"Login"})})]})},L=function(){var e=Object(r.useState)({name:null,userID:null,token:null}),n=Object(a.a)(e,2),t=n[0],c=n[1],o=(Object(i.e)(),D());o.login,o.register;return Object(x.jsxs)(u.h,{children:[Object(x.jsxs)(u.n,{children:[Object(x.jsx)(u.r,{children:"Nazwa u\u017cytkownika"}),Object(x.jsx)(u.m,{type:"text",onIonChange:function(e){c({name:e.detail.value,token:t.token,userID:t.userID})}})]}),Object(x.jsxs)(u.n,{children:[Object(x.jsx)(u.r,{children:"Has\u0142o"}),Object(x.jsx)(u.m,{type:"password",onIonChange:function(e){c({name:t.name,token:e.detail.value,userID:t.userID})}})]}),Object(x.jsx)(u.n,{children:Object(x.jsx)(u.b,{onClick:function(){},children:"Login"})})]})},z=function(){return Object(x.jsxs)(u.A,{children:[Object(x.jsxs)(u.x,{children:[Object(x.jsx)(i.b,{path:"/users/login",component:_,exact:!0}),Object(x.jsx)(i.b,{path:"/users/registration",component:L,exact:!0}),Object(x.jsx)(i.b,{path:"/users",render:function(){return Object(x.jsx)(i.a,{to:"/users/login"})},exact:!0})]}),Object(x.jsxs)(u.y,{slot:"top",children:[Object(x.jsx)(u.z,{tab:"login",href:"/users/login",children:Object(x.jsx)(u.r,{children:"Login"})}),Object(x.jsx)(u.z,{tab:"registrartion",href:"/users/registration",children:Object(x.jsx)(u.r,{children:"registration"})})]})]})},S=function(){var e=Object(m.a)("access_token"),n=Object(a.a)(e,2),t=n[0],r=n[1];return Object(x.jsxs)(u.a,{children:[Object(x.jsx)(u.k,{color:"primary",children:Object(x.jsxs)(u.C,{color:"primary",children:[Object(x.jsxs)(u.B,{children:[Object(x.jsx)(u.b,{href:"/",children:Object(x.jsx)(u.l,{icon:f.f,size:"large"})}),"Listy zakup\xf3w"]}),null!==t?Object(x.jsx)(u.b,{onClick:function(){r(null)},children:"logout"}):Object(x.jsx)(u.b,{href:"/users",children:"login"})]})}),Object(x.jsx)(u.h,{children:Object(x.jsxs)(j.a,{children:[Object(x.jsxs)(u.x,{children:[Object(x.jsx)(i.b,{path:"/dashboard",component:C,exact:!0}),Object(x.jsx)(i.b,{path:"/users",component:z,exact:!0})]}),t?Object(x.jsx)(C,{}):Object(x.jsx)(z,{})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=function(e){e&&e instanceof Function&&t.e(58).then(t.bind(null,173)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,s=n.getTTFB;t(e),r(e),c(e),o(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(S,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),N()},72:function(e,n,t){var r={"./ion-action-sheet.entry.js":[113,5],"./ion-alert.entry.js":[114,6],"./ion-app_8.entry.js":[115,7],"./ion-avatar_3.entry.js":[116,17],"./ion-back-button.entry.js":[117,18],"./ion-backdrop.entry.js":[118,43],"./ion-button_2.entry.js":[119,19],"./ion-card_5.entry.js":[120,20],"./ion-checkbox.entry.js":[121,21],"./ion-chip.entry.js":[122,22],"./ion-col_3.entry.js":[123,44],"./ion-datetime_3.entry.js":[124,10],"./ion-fab_3.entry.js":[125,23],"./ion-img.entry.js":[126,45],"./ion-infinite-scroll_2.entry.js":[127,46],"./ion-input.entry.js":[128,24],"./ion-item-option_3.entry.js":[129,25],"./ion-item_8.entry.js":[130,26],"./ion-loading.entry.js":[131,27],"./ion-menu_3.entry.js":[132,28],"./ion-modal.entry.js":[133,8],"./ion-nav_2.entry.js":[134,14],"./ion-popover.entry.js":[135,9],"./ion-progress-bar.entry.js":[136,29],"./ion-radio_2.entry.js":[137,30],"./ion-range.entry.js":[138,31],"./ion-refresher_2.entry.js":[139,11],"./ion-reorder_2.entry.js":[140,16],"./ion-ripple-effect.entry.js":[141,47],"./ion-route_4.entry.js":[142,32],"./ion-searchbar.entry.js":[143,33],"./ion-segment_2.entry.js":[144,34],"./ion-select_3.entry.js":[145,35],"./ion-slide_2.entry.js":[146,48],"./ion-spinner.entry.js":[147,13],"./ion-split-pane.entry.js":[148,49],"./ion-tab-bar_2.entry.js":[149,36],"./ion-tab_2.entry.js":[150,15],"./ion-text.entry.js":[151,37],"./ion-textarea.entry.js":[152,38],"./ion-toast.entry.js":[153,39],"./ion-toggle.entry.js":[154,12],"./ion-virtual-scroll.entry.js":[155,50]};function c(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],c=n[0];return t.e(n[1]).then((function(){return t(c)}))}c.keys=function(){return Object.keys(r)},c.id=72,e.exports=c},74:function(e,n,t){var r={"./ion-icon.entry.js":[156,57]};function c(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],c=n[0];return t.e(n[1]).then((function(){return t(c)}))}c.keys=function(){return Object.keys(r)},c.id=74,e.exports=c},92:function(e,n,t){}},[[111,3,4]]]);
//# sourceMappingURL=main.de8cf333.chunk.js.map